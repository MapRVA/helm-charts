baseUrl: <BASE URL>
apiUrl: <API URL>
secret: <SECRET HERE>

org:
  name: <NAME OF ORG>
  code: <ORG CODE>
  url: <ORG URL>
  logoUrl: https://cdn.img.url/logo.png
  github: <GITHUB URL>

oAuth2:
  clientId: <CLIENT ID>
  clientSecret: <CLIENT SECRET>
  redirectUri: <REDIRECT URI>
  scope: read_prefs write_api

osm:
  serverUrl: https://www.openstreetmap.org
  serverApiUrl: https://api.openstreetmap.org
  nominatimServerUrl: https://nominatim.openstreetmap.org
  registerUrl: https://www.openstreetmap.org/user/new
  idEditorUrl: https://www.openstreetmap.org/user/new
  potlatch2EditorUrl: https://www.openstreetmap.org/edit?editor=potlatch2
  rapidEditorUrl: https://mapwith.ai/rapid

ohsome:
  baseUrl: https://stats.now.ohsome.org
  apiUrl: https://stats.now.ohsome.org/api
  apiToken: <API TOKEN HERE>
  topics: highway,waterway,building,poi

email:
  smtpHost: smtp.gmail.com
  smtpPort: "587"
  smtpUser: <EMAIL HERE>
  smtpPassword: <PASSWORD HERE>
  smtpUseTls: "0"
  smtpUseSsl: "1"
  sendProjectEmailUpdates: "-1"

settings:
  defaultChangesetComment: "tasks-hotosm" # BEWARE, a number sign (#) is prepended to this string
  defaultLocale: en
  taskUnlockAfter: 2h
  mapperLevelIntermediate: "250"
  mapperLevelAdvanced: "500"
  importMaxFilesize: "1000000"
  maxAoiArea: "5000"

networkPolicies:
  enabled: false

  # Kubernetes API server endpoint (needed by CNPG pods to query cluster resources)
  # Use the actual API server endpoint IP, not the kubernetes ClusterIP â€”
  # NetworkPolicy ipBlock rules are evaluated after DNAT, so the ClusterIP
  # (e.g. 10.43.0.1) won't match. Find it with: kubectl get endpoints kubernetes -n default
  kubeApiServer:
    cidr: "172.30.0.11/32"
    port: 6443

  # DNS egress (required for all pods to resolve service names)
  dns:
    # Namespace where CoreDNS/kube-dns runs
    namespace: kube-system
    # Labels to select DNS pods
    podSelector:
      matchLabels:
        k8s-app: kube-dns

frontend:
  image: ghcr.io/maprva/frontend:941a235
  replicaCount: 1
  imagePullPolicy: IfNotPresent

backend:
  image: ghcr.io/maprva/backend:941a235
  replicaCount: 1
  imagePullPolicy: IfNotPresent

database:
  backend: cnpg # this can be "cnpg", "simple", or "none"
  replicas: 2 # only works with cnpg backend
  storage:
    storageClass: nfs-csi
    size: 5Gi
  # backups currently only work with cnpg backend
  backup:
    enabled: true
    schedule: "0 0 0,12 * * *"
    retentionPolicy: "30d"
    objectStoreName: my-backup-store
    s3Credentials:
      destinationPath: s3://backup-bucket-name
      endpointUrl: https://s3.zone.example.com
      accessKeyId:
        name: cnpg-backup
        key: ACCESS_KEY_ID
      secretAccessKey:
        name: cnpg-backup
        key: SECRET_ACCESS_KEY
  # recovery also cnpg-only
  recover:
    enabled: false
    objectStoreName: my-recover-store
    s3Credentials:
      destinationPath: s3://recover-bucket-name
      endpointUrl: https://s3.zone.example.com
      accessKeyId:
        name: cnpg-recover
        key: ACCESS_KEY_ID
      secretAccessKey:
        name: cnpg-recover
        key: SECRET_ACCESS_KEY
