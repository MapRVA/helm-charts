frontend:
  image: ghcr.io/maprva/yesterdays:42ff84e
  pullPolicy: IfNotPresent
  replicaCount: 3

tasks:
  background:
    replicaCount: 3
  beat:
    enabled: true

osm:
  serverUrl: https://www.openstreetmap.org
  clientId: <CLIENT ID>
  clientSecret: <CLIENT SECRET>
  secretKey: <SECRET KEY>
  redirectUri: <REDIRECT URI>

django:
  timeZone: "UTC"
  secretKey: <DJANGO SECRET KEY>
  debug: "false"
  allowedHosts: <ALLOWED HOSTS>
  adminUsernames: <USERNAMES> # comma-separated list with no spaces

clip:
  storageClass: local-path
  size: 10Gi

database:
  backend: cnpg # this can be "cnpg", "simple", or "none"
  name: georeference-tool
  replicas: 3 # only works with cnpg backend
  storage:
    storageClass: local-path
    size: 50Gi
  # backups currently only work with cnpg backend
  backup:
    enabled: true
    schedule: "0 0 0,12 * * *"
    retentionPolicy: "30d"
    objectStoreName: my-backup-store
    s3Credentials:
      destinationPath: s3://backup-bucket-name
      endpointUrl: https://s3.zone.example.com
      accessKeyId:
        name: cnpg-backup
        key: ACCESS_KEY_ID
      secretAccessKey:
        name: cnpg-backup
        key: SECRET_ACCESS_KEY
  # recovery also cnpg-only
  recover:
    enabled: false
    objectStoreName: my-recover-store
    s3Credentials:
      destinationPath: s3://recover-bucket-name
      endpointUrl: https://s3.zone.example.com
      accessKeyId:
        name: cnpg-recover
        key: ACCESS_KEY_ID
      secretAccessKey:
        name: cnpg-recover
        key: SECRET_ACCESS_KEY

protomaps:
  key: MY_PROTOMAPS_KEY

import:
  r2:
    publicUrlBase: ""
    bucketName: ""
    accessKeyId: ""
    secretAccessKey: ""
    endpointUrl: ""

metadataRefresh:
  # Refresh intervals in seconds (how often Celery Beat triggers each task)
  # Default 60s = 1 per minute
  wikidataInterval: 60
  osmInterval: 60
  # Hours after which metadata is considered stale and needs refresh
  staleHours: 24
  # Max consecutive failures before giving up on a record
  maxFailures: 5
  # Postpass API settings for OSM geometry fetching
  postpassUrl: "https://postpass.geofabrik.de/api/0.2/interpreter"
  postpassTimeout: 60
  # Bounding box for OSM queries (Virginia and surrounding area)
  postpassBbox: "ST_SetSRID(ST_MakeBox2D(ST_MakePoint(-84.72, 35.90), ST_MakePoint(-74.97, 39.71)), 4326)"
